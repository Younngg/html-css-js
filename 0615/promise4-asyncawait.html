<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        border: 1px solid black;
      }
      .one {
        width: 600px;
        height: 100px;
        border: 1px solid red;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <div class="box"></div>
    <!-- 
    1. promise
    2. async / await
    3. fetch
    4. axios 라이브러리

    promise : 순서대로 진행할 수 있도록 / 원활한 진행을 위해 만들어짐. 생성자 함수

    new Promise(a, b);
    a는 resolve, 성공(success)했을 때 실행
    b는 reject, 실패(fail)했을 때 실행 

    생성자 함수이기 때문에 변수에 할당해야 한다
    임의의 함수를 만들어서 그 함수 내부에서 사용할 수 있도록 한다.

    setTimeOut(function(){}, 1000) : 일정 시간 뒤에 한 번만 실행
    setInterval(function(){}, 1000) : 일정 시간마다 한 번씩 실행 
  -->
    <script>
      /* const fnc1 = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            // 실행문
            resolve('작업이 종료되었습니다. 그 다음을 수행해도 됩니다.');
          }, 1000);
        });
      };

      //console.log(fnc1());
      fnc1()
      .then(()=>{

      })
      .then(()=>{

      }) */

      const box = document.querySelector('.box');
      const data = [
        './jsonData-1.json',
        './jsonData-2.json',
        './jsonData-3.json',
        './jsonData-4.json',
      ];
      const mkElement = (num) => {
        let mkDiv = document.createElement('div');
        mkDiv.setAttribute('class', 'one');
        mkDiv.innerText = num;
        box.append(mkDiv);
      };

      /* const fnc = async () => {
        await fetch(data[0]).then(() => {
          mkElement('1');
        });

        await fetch(data[1]).then(() => {
          mkElement('2');
        });

        await fetch(data[2]).then(() => {
          mkElement('3');
        });

        await fetch(data[3]).then(() => {
          mkElement('4');
        });
      };

      fnc(); */

      (async () => {
        await fetch(data[0]).then(() => {
          mkElement('1');
        });

        await fetch(data[1]).then(() => {
          mkElement('2');
        });

        await fetch(data[2]).then(() => {
          mkElement('3');
        });

        await fetch(data[3]).then(() => {
          mkElement('4');
        });
      })(); // 즉시실행함수
      // async await
      // await : 진행중인 구문이 끝날 때까지 기다리게 하는 구문
      // 감싸는 함수에서 async를 붙여야 사용 가능.
      // async : 함수 앞에 붙여서 비동기도 돌아가게 해준다.
    </script>
  </body>
</html>
